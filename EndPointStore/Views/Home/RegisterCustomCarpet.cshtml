@using EndPointStore.Models.HomePageViewModel;
@model HomePageViewModel
@{
    ViewData["Title"] = "RegisterCustomCarpet";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@await Component.InvokeAsync("HeaderTop")

<!-- start page title section -->
<section class="wow animate__fadeIn parallax" data-parallax-background-ratio="0.5" style="background-image:url('/SiteTemplate/assets/images/parallax-bg1.jpg');">
    <div class="opacity-medium bg-extra-dark-gray"></div>
    <div class="container position-relative">
        <div class="row align-items-center">
            <div class="col-12 d-flex flex-column justify-content-center text-center extra-small-screen page-title-large">
                <!-- start page title -->
                <h1 class="text-white-2 alt-font font-weight-600 letter-spacing-minus-1 margin-10px-bottom">Register Custom Carpet</h1>
                <!-- end page title -->
            </div>
        </div>
    </div>
</section>
<!-- end page title section -->
<section class="wow animate__fadeIn">
    <div class="container">
        <div class="row">
            <!-- start contact-form -->
            <form id="register-custom-carpet">
                <div class="row">
                    <div class="col-12">
                        <div class="form-results d-none"></div>
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="float-start">Name:</label>
                        <input type="text" asp-for="RegisterCustomCarpetModel.Name" placeholder="Name *" class="bg-transparent border-color-medium-dark-gray medium-input required">
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="float-start">Phone:</label>
                        <input type="tel" asp-for="RegisterCustomCarpetModel.PhoneNumber" placeholder="Phone" class="bg-transparent border-color-medium-dark-gray medium-input">
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="float-start">Email:</label>
                        <input type="email" asp-for="RegisterCustomCarpetModel.Email" placeholder="E-mail *" class="bg-transparent border-color-medium-dark-gray medium-input required">
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="float-start">Country:</label>
                        <input type="text" asp-for="RegisterCustomCarpetModel.Country" placeholder="Country *" class="bg-transparent border-color-medium-dark-gray medium-input required">
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="float-start">Address:</label>
                        <input type="text" asp-for="RegisterCustomCarpetModel.Address" placeholder="Address Delivery *" class="bg-transparent border-color-medium-dark-gray medium-input required">
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="float-start">DeliveryDate:</label>
                        <input type="date" asp-for="RegisterCustomCarpetModel.DeliveryDate" placeholder="Date Delivery *" class="bg-transparent border-color-medium-dark-gray medium-input required">
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="float-start">Select Category:</label>
                        <div class="select-style medium-select border-color-medium-dark-gray">
                            <select asp-for="RegisterCustomCarpetModel.CategoryId" asp-items=ViewBag.Category class="bg-transparent mb-0">
                            </select>
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="float-start">Select Size:</label>
                        <div class="select-style medium-select border-color-medium-dark-gray">
                            <select asp-for="RegisterCustomCarpetModel.SizeId" asp-items=ViewBag.Sizes class="bg-transparent mb-0">
                            </select>
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="float-start">Select Color:</label>
                        <div class="select-style medium-select border-color-medium-dark-gray">
                            <select asp-for="RegisterCustomCarpetModel.ColorId" asp-items=ViewBag.Colors class="bg-transparent mb-0">
                            </select>
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="float-start">Select Material:</label>
                        <div class="select-style medium-select border-color-medium-dark-gray">
                            <select asp-for="RegisterCustomCarpetModel.MaterialId" asp-items=ViewBag.Materials class="bg-transparent mb-0">
                            </select>
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="float-start">Select Shape:</label>
                        <div class="select-style medium-select border-color-medium-dark-gray">
                            <select asp-for="RegisterCustomCarpetModel.ShapeId" asp-items=ViewBag.Shapes class="bg-transparent mb-0">
                            </select>
                        </div>
                    </div>
                    <div class="col-12 text-center">
                        <button id="register-custom" type="submit" class="btn btn-deep-pink btn-rounded btn-large margin-20px-top sm-no-margin-top submit">Register</button>
                    </div>
                </div>
            </form>
            <!-- end contact-form -->
        </div>
    </div>
</section>
@section Scripts
    {
    <script>
        $('#register-custom').on('click', function () {
            let btn = $(this);
            btn.prop('disabled', true);
            btn.text("Please wait...");
            let name = $('#RegisterCustomCarpetModel_Name').val()
            let phoneNumber = $('#RegisterCustomCarpetModel_PhoneNumber').val()
            let email = $('#RegisterCustomCarpetModel_Email').val()
            let address = $('#RegisterCustomCarpetModel_Address').val();
            let country = $('#RegisterCustomCarpetModel_Country').val();
            let deliveryDate = $('#RegisterCustomCarpetModel_DeliveryDate').val();
            let categoryId = $('#RegisterCustomCarpetModel_CategoryId').val();
            let colorId = $('#RegisterCustomCarpetModel_ColorId').val();
            let sizeId = $('#RegisterCustomCarpetModel_SizeId').val();
            let materialId = $('#RegisterCustomCarpetModel_MaterialId').val();
            let shapeId = $('#RegisterCustomCarpetModel_ShapeId').val();


            var data = {
                name, phoneNumber, email, address, country, deliveryDate
                , categoryId, colorId, sizeId, materialId, shapeId
            }
            ajaxFunc("/Home/RegisterCustomCarpet", data, "POST",
                function (result) {
                    if (result.isSuccess) {
                        $("#register-custom-carpet").trigger("reset");
                        btn.text("Register");
                        btn.prop('disabled', false);
                        Toastify({
                            text: result.message,
                            duration: 3000,
                            className: "success-toastify"
                        }).showToast();
                    } else {
                        btn.prop('disabled', false);
                        btn.text("Register");
                        Toastify({
                            text: result.message,
                            duration: 3000,
                            className: "error-toastify"
                        }).showToast();
                    }
                },
                function (error) {
                    btn.prop('disabled', false)
                    btn.text("Register");
                    Toastify({
                        text: "Error System",
                        duration: 3000,
                        className: "error-toastify"
                    }).showToast();
                    console.log(error);
                }
            )
        });
    </script>
}