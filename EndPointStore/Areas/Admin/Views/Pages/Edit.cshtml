@using Store.Application.Services.Pages.Queries.GetEditPageCreator;
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model GetEditPageCreatorDto
@{
	ViewData["Title"] = "Edit";
	Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<div class="intro-y flex flex-col sm:flex-row items-center mt-8">
	<h2 class="text-lg font-medium ml-auto">
		صفحه ساز
	</h2>
	<div class="w-full sm:w-auto flex mt-4 sm:mt-0">
		<div class="dropdown ml-2">
		
		</div>

	</div>
</div>
<!-- BEGIN: Personal Information -->
<div class="intro-y box mt-5">
	<div class="p-5">
		<div class="grid grid-cols-12 gap-x-5">
			<div class="col-span-12 xl:col-span-4">
				@* <div>
				<label for="update-profile-form-6" class="form-label">ایمیل</label>
				<input id="update-profile-form-6" type="text" class="form-control" placeholder="متن ورودی" value="denzelwashington@left4code.com" disabled="">
				</div>*@
				<input type="hidden" asp-for="Id" />
				<div class="mt-3">
					<label for="update-profile-form-9" class="form-label">عنوان</label>
					<input asp-for="Title" type="text" class="form-control" placeholder="متن ورودی">
				</div>
				<div class="mt-3">
					<label for="update-profile-form-9" class="form-label">توضیحات</label>
					<textarea asp-for="Description" type="text" class="form-control" placeholder="توضیحات خود را وارد کنید"></textarea>
				</div>
				<div class="mt-3">
					<label for="update-profile-form-9" class="form-label">متا تگ</label>
					<input asp-for="MetaTagKeyWords" type="text" class="form-control" placeholder="متن ورودی">
				</div><div class="mt-3">
					<label for="update-profile-form-9" class="form-label"> متا تگ توضیحی</label>
					<input asp-for="MetaTagDescription" type="text" class="form-control" placeholder="متن ورودی">
				</div>
				<div class="mt-3">
					<label for="update-profile-form-9" class="form-label">آدرس دوستداران سِو</label>
					<input asp-for="Slug" type="text" class="form-control" placeholder="متن ورودی">
				</div>
				<div class="mt-3">
					<div class="w-full sm:w-auto flex items-center sm:ml-auto mt-3 sm:mt-0">
					<span class="sm:ml-auto mt-1 sm:mt-0 text-xs text-gray-600">وضعیت صفحه</span>
					<input asp-for="IsActive" data-target="#icon-dismiss-alert" class="show-code form-check-switch ml-0 mr-3" type="checkbox">
				   </div>
				</div>
			</div>
			<div class="col-span-12 xl:col-span-8">
				<div class="mt-3">
					<label for="update-profile-form-9" class="form-label">محتوا</label>
					<div id="standard-editor">
						<div class="preview">
							<textarea asp-for="Content" class="editor">
								@Html.Raw(Model.Content)
							</textarea>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="flex justify-end mt-4">
			<button id="edit-page" type="button" class="btn btn-primary w-20 ml-auto"> ویرایش </button>
		</div>
	</div>
</div>
<!-- END: Personal Information -->
<!-- BEGIN: Modal Content -->
<div id="modalSelectFiles" class="modal" tabindex="-1" aria-hidden="true">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">
			<!-- BEGIN: Modal Header -->
			<div class="modal-header">
				<h2 class="font-medium text-base ml-auto">
					مدیریت فایل
				</h2>
				<button id="back-button" onclick="backToLastDirectory()" class="btn btn-primary w-32 ml-2 d-none">
					<i data-feather="corner-up-left" class="w-4 h-4 ml-2"></i> بازگشت
				</button>
				<button onclick="goToRoot()" class="btn btn-secondary w-24 inline-block ml-1 ">ریشه</button>
				<div class="dropdown sm:hidden">
					<a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"> <i data-feather="more-horizontal" class="w-5 h-5 text-slate-500"></i> </a>
					<div class="dropdown-menu w-40">
						<ul class="dropdown-content">
							<li>
								<a href="javascript:;" class="dropdown-item"> <i data-feather="file" class="w-4 h-4 ml-2"></i> دانلود فایل </a>
							</li>
						</ul>
					</div>
				</div>
			</div>
			<!-- END: Modal Header -->
			<!-- BEGIN: Modal Body -->
			<div id="filemanager-body" class="intro-y grid grid-cols-12 gap-3 sm:gap-6 mt-5 modal-body">
			</div>
			<!-- END: Modal Body -->
			<!-- BEGIN: Modal Footer -->
			<div class="modal-footer" id="upload-modal-footer">
			</div>
			<!-- END: Modal Footer -->
		</div>
	</div>
</div>
<!-- END: Modal Content -->
@section Scripts{
	<script src="~/AdminTemplate/assets/js/jquery.js"></script>
	<script src="~/AdminTemplate/Library/toastify-js/toastify.min.js"></script>
	<script src="~/AdminTemplate/Library/jquery-validate/jquery.validate.min.js"></script>
	<script src="~/AdminTemplate/Library/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
	<script src="~/AdminTemplate/Library/jquery-validate/localization/messages_fa.min.js"></script>
	<script src="~/AdminTemplate/assets/js/main.js"></script>
	<script src="~/AdminTemplate/assets/js/select-files.js"></script>
	<script>
		$('#edit-page').on("click", function () {
			let id = $('#Id').val();
			let title = $('#Title').val();
			let description = $('#Description').val();
			let MetaTagKeyWords = $('#MetaTagKeyWords').val();
			let metaTagDescription = $('#MetaTagDescription').val();
			let slug = $('#Slug').val();
			let isActive = $('#IsActive').is(':checked') ? true : false
			var content = $('#standard-editor .editor').html();
			var data = {
				id,title, description, MetaTagKeyWords, metaTagDescription, slug, isActive, content
			}
			console.log(data);
			ajaxFunc("Edit", data, "POST",
				function (result) {
					if (result.isSuccess) {
						successToastify.showToast();
						setTimeout(function () {
							location.replace("/Admin/Pages/Index")
						}, 2000);
					} else {
						dangerToastify.showToast();
					}
				},
				function (error) {
					dangerToastify.showToast();
					console.log(error);
				}
			)
		});

	</script>
	}